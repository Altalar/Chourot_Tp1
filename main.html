<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gestionnaire de contact</title>
</head>

<style>
    .grid-item {
        background-color: rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(30, 243, 0, 0.8);
        padding: 20px;
        font-size: 30px;
        text-align: center;
    }

    select {
        height: 30px;
        border-radius: 6px;
        margin:6px;
    }
    .grid-container {
        display: grid;
        grid-template-columns: 25% 30% 35% 5% 5%;
        background-color: #f300b7;
        padding: 10px;
        margin:6px;
    }

    .grid-container2 {
        color:red;
        display: grid;
        grid-template-columns: auto;
        background-color: #003ff3;
        padding: 10px;
        margin:6px;
    }
</style>
<body>
</body>
<script>
    let bodyAccess = document.getElementsByTagName("BODY")[0];
    //tableau 2 la bar d'ajout,création
    let divBar = document.createElement('div');
    divBar.classList.add('grid-container2');
    bodyAccess.appendChild((divBar));
    //tableau 1, création
    let divContact = document.createElement('div');
    divContact.classList.add('grid-container');
    bodyAccess.appendChild((divContact));

    let nbColsSelected = 5;
    setCSS(document.styleSheets[0],
        '.grid-container',
        'grid-template-columns',
        'auto '.repeat(nbColsSelected));
    //tableau2
    let nbColsSelected2 = 5;
    setCSS(document.styleSheets[0],
        '.grid-container2',
        'grid-template-columns',
        'auto '.repeat(nbColsSelected2));

    function setCSS(styleSheet, cssSelector, rule, value){
        let target ;//= null;
        for(target of styleSheet.rules) {
            if (target.selectorText == cssSelector) break;
        }
        if (target !== null)
            target.style[rule] = value;
        else
            styleSheet.insertRule( cssSelector + ' {' + rule + ':' + value + '; }');
    }
    class Contact {
        constructor(name, phone, email){this.name = name; this.phone = phone; this.email = email;}
        //static compare(contact_A, contact_B){ return contact_A.toString().localeCompare(contact_B.toString());}
    }
    let Contacts = [];

    function BuildListContact () {
        Contacts.push(new Contact("test", "test", "test"));
        Contacts.push(new Contact("testt", "tsett", "tsett"));
        Contacts.push(new Contact("tsette", "testte", "testte"));
        Contacts.push(new Contact("testtes", "testtes", "testtes"));
    }

    function Buildable(content, css)//renommé par webstorm parce qu'il chialait
    {
        let cell = document.createElement('div');
        cell.innerHTML = content;
        let cssName = css;//.splice(' ');
        //cssName.forEach(cssName => {
            cell.classList.add(cssName);
        //});
        return cell;
    }
    function buttonCell() {

    }
    function makeBTN(css, id, toolTip, position) {
        let btn = document.createElement('button');
        btn.setAttribute('toolTip', toolTip);
        btn.setAttribute('toolTipPosition', position);
        let span = document.createElement('span');
        btn.appendChild(span);
        //css.splice(' ').forEach(cssName => {
            span.classList.add(css);
        //});
        return btn;
    }
    function createContactRow(contact, row_index, container) {
        let rowClass = "row_" + row_index;
        container.appendChild(Buildable(contact.name, rowClass));
        container.appendChild(Buildable(contact.phone, rowClass));
        container.appendChild(Buildable(contact.email, rowClass));
        //let editbtncell =
        container.appendChild(makeBTN('edit_' + row_index, rowClass + "glyphIcon-pencil", "modifier " + contact.name));
        container.appendChild(makeBTN('Delete_' + row_index, rowClass + "glyphIcon-pencil", "modifier " + contact.name));
    }
    function updatecontactlist(container, Contacts) {
        container = document.getElementById('Contacts');
        while (container.firstChild) {
            container.removeChild(container.firstChild);
            let rowindex = 0;
            for (let Content of Contacts) {
                createContactRow(Content, rowindex++, container);
            }
        }
    }
    function buildContactList(container, contacts)
    {
        let rowindex = 0;
        for (let Content of Contacts) {
            createContactRow(Content, rowindex++, container);
        }
    }
    function buildAddContactBar(container)
    {
        let rowClass = "AddContactBar";
        container.appendChild(Buildable("Nom", rowClass));
        container.appendChild(Buildable("Telephone", rowClass));
        container.appendChild(Buildable("Email", rowClass));
        container.appendChild(makeBTN('Add_Contact', rowClass + "glyphIcon-pencil", "modifier " + "Nom"));
    }
    console.log(Contacts);
    BuildListContact();
    buildAddContactBar(divBar);
    buildContactList(divContact,Contacts);
</script>
</html>